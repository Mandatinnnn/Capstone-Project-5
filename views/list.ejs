<!DOCTYPE html>
<html>
<head>
    <title>MyLibrary</title>
    <link rel="stylesheet" type="text/css" href="/css/header.css">
    <link rel="stylesheet" type="text/css" href="/css/search-bar.css">
    <link rel="stylesheet" type="text/css" href="/css/style.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap" rel="stylesheet">
</head>
<body>
    <%- include('partials/header') %>

    <section class="main">
        <%- include('partials/search-bar') %>

        <section class="my-books">
            <div class="control-panel">
                <h2 class="title">My Books</h2>
                <div class="filter">
                    <div class="control">
                        <h3>Filter</h3>
                        <button id="filter-btn">
                            <svg width="24px" height="24px" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 2L15.09 5.09L8.18 12L15.09 18.91L12 22L2 12L12 2Z" />
                            </svg>
                        </button>
                    </div>
                    <div id="filter-dropdown-menu" class="dropdown-menu">
                        <ul>
                            <li><a href="#" data-category="all">All</a></li>
                            <li><a href="#" data-category="reading">Reading</a></li>
                            <li><a href="#" data-category="read">Read</a></li>
                            <li><a href="#" data-category="favorite">Favorite</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="my-books-container">
                <% myBooks.forEach(book => { %>
                    <div class="book-container" data-book-id="<%= book.title %>" data-category="<%= book.category %>">
                        <div class="book-cover-wrapper">
                            <img src="<%= book.cover_url %>" alt="" class="book-img">
                            <div class="category-icon">
                                <% if (book.category === 'reading') { %>
                                    <svg fill="currentColor" width="800px" height="800px" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M5 2.92445C5 1.8616 5.8616 1 6.92444 1H20.3956C21.4584 1 22.32 1.8616 22.32 2.92444V25.0556C22.32 26.6414 20.5096 27.5466 19.2409 26.5951L13.66 22.4094L8.07911 26.5951C6.81045 27.5466 5 26.6414 5 25.0556V2.92445ZM20.3956 3.50178C20.3956 3.18293 20.1371 2.92444 19.8182 2.92444L7.50178 2.92445C7.18293 2.92445 6.92444 3.18293 6.92444 3.50178V24.4782C6.92444 24.7161 7.19601 24.8519 7.38631 24.7092L12.5053 20.8699C13.1896 20.3567 14.1304 20.3567 14.8147 20.8699L19.9337 24.7092C20.124 24.8519 20.3956 24.7161 20.3956 24.4782V3.50178Z"/>
                                    </svg>
                                <% } else if (book.category === 'read') { %>
                                    <svg width="800px" height="800px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path fill="none" d="M20 12V17C20 18.8856 20 19.8284 19.4142 20.4142C18.8284 21 17.8856 21 16 21H6.5C5.11929 21 4 19.8807 4 18.5V18.5C4 17.1193 5.11929 16 6.5 16H16C17.8856 16 18.8284 16 19.4142 15.4142C20 14.8284 20 13.8856 20 12V7C20 5.11438 20 4.17157 19.4142 3.58579C18.8284 3 17.8856 3 16 3H8C6.11438 3 5.17157 3 4.58579 3.58579C4 4.17157 4 5.11438 4 7V18.5" stroke="#363e56" stroke-width="2"/>
                                        <path fill="none" d="M9 10L10.2929 11.2929C10.6834 11.6834 11.3166 11.6834 11.7071 11.2929L15 8" stroke="#363e56" stroke-width="2" stroke-linecap="round"/>
                                    </svg>
                                <% } else if (book.category === 'favorite') { %>
                                    <svg fill="currentColor" width="800px" height="800px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M20.5,4.609A5.811,5.811,0,0,0,16,2.5a5.75,5.75,0,0,0-4,1.455A5.75,5.75,0,0,0,8,2.5,5.811,5.811,0,0,0,3.5,4.609c-.953,1.156-1.95,3.249-1.289,6.66,1.055,5.447,8.966,9.917,9.3,10.1a1,1,0,0,0,.974,0c.336-.187,8.247-4.657,9.3-10.1C22.45,7.858,21.453,5.765,20.5,4.609Zm-.674,6.28C19.08,14.74,13.658,18.322,12,19.34c-2.336-1.41-7.142-4.95-7.821-8.451-.513-2.646.189-4.183.869-5.007A3.819,3.819,0,0,1,8,4.5a3.493,3.493,0,0,1,3.115,1.469,1.005,1.005,0,0,0,1.76.011A3.489,3.489,0,0,1,16,4.5a3.819,3.819,0,0,1,2.959,1.382C19.637,6.706,20.339,8.243,19.826,10.889Z"/>
                                    </svg>
                                <% } %>
                            </div>
                        </div>
                        <div class="book-inf">
                            <h3 class="book-name"> <%= book.title %> </h3>
                            <p class="book-author"> <%= book.author %> </p>
                            <div class="rating" data-total-value="<%= parseFloat(book.rating).toFixed(0) %>">
                                <div class="rating-item" data-item-value="5">★</div>
                                <div class="rating-item" data-item-value="4">★</div>
                                <div class="rating-item" data-item-value="3">★</div>
                                <div class="rating-item" data-item-value="2">★</div>
                                <div class="rating-item" data-item-value="1">★</div>
                            </div>
                            <div class="my-book-buttons">
                                <button id="book-category">Category</button>
                                <div class="category-dropdown dropdown-menu">
                                    <ul>
                                        <li><a href="#" data-category="reading">Reading</a></li>
                                        <li><a href="#" data-category="read">Read</a></li>
                                        <li><a href="#" data-category="favorite">Favorite</a></li>
                                    </ul>
                                </div>
                                <button id="book-delete">Delete</button>
                            </div>
                        </div>
                    </div>
                <% }); %>
            </div>
        </section>
    </section>

    <script src="/js/header.js"></script>
    <script src="/js/book-page.js"></script>
    <script src="/js/search.js"></script>
    <script src="/js/filter.js"></script>
    <script src="/js/buttons.js"></script>
</body>
</html>
